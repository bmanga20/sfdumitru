(function(){/*
sigplus editor button
@author  Levente Hunyadi
@version 1.5.0
@remarks Copyright (C) 2011-2017 Levente Hunyadi
@remarks Licensed under GNU/GPLv3, see https://www.gnu.org/licenses/gpl-3.0.html
@see     https://hunyadi.info.hu/projects/sigplus
*/
'use strict';Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);function k(g,d,e){e="{"+d+e+"}myfolder{/"+d+"}";d=window.parent;var b;a:{if((b=window.parent.Joomla)&&(b=b.editors)&&(b=b.instances)&&b.hasOwnProperty(g)){b=b[g];break a}b=void 0}b?b.replaceSelection(e):(0,d.jInsertEditorText)(e,g);(g=d.jModalClose)?g():d.jQuery(".modal").modal("hide")}
function l(){var g=window.location.search,d={};1<g.length&&g.substr(1).split("&").forEach(function(e){var b=e.indexOf("="),a=0<=b?e.substr(b+1):"";d[decodeURIComponent(0<=b?e.substr(0,b):e)]=decodeURIComponent(a)});return d}
document.addEventListener("DOMContentLoaded",function(){function g(a){a=a.getAttribute("name");var c=a.match(/^params\[(.*)\]$/);return c?c[1]:a}var d=document.getElementById("sigplus-settings-form"),e=[].slice.call(d.querySelectorAll("li")),b=window.parent.sigplus;b&&[].forEach.call(d.querySelectorAll("input[name][type=checkbox],input[name][type=radio],input[name][type=text],select[name]"),function(a){var c=g(a);if(c=b[c])a.matches("input[name][type=checkbox]")?a.checked=!!c:a.matches("input[name][type=radio]")&&
a.value===""+c?a.checked=!0:a.matches("input[name][type=text],select[name]")&&(a.value=c)});[].forEach.call(e,function(a){var c=document.createElement("input");c.setAttribute("type","checkbox");[].forEach.call(a.querySelectorAll("input[name][type=checkbox],input[name][type=radio],input[name][type=text],select[name]"),function(f){f.addEventListener("focus",function(){c.checked=!0})});a.insertBefore(c,a.firstChild)});document.getElementById("sigplus-settings-submit").addEventListener("click",function(){var a=
[];[].forEach.call(e,function(f){var h=f.querySelector("input[type=checkbox]");if((f=f.querySelector("input[name][type=checkbox]:checked,input[name][type=radio]:checked,input[name][type=text],select[name]"))&&h&&h.checked&&(h=g(f),f=f.value)){if(/color$/.test(h)||!/^(0|[1-9]\d*)$/.test(f))f='"'+f+'"';a.push(h+"="+f)}});var c=0<a.length?" "+a.join(" "):"";k(l().editor,b.tag_gallery,c)})});}).call(this);
